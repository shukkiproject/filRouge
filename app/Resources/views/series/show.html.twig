{% extends 'base.html.twig' %}

{% block body %}

    {% if series %}
    <ol class="breadcrumb">
        <li><a href="{{ path('site_main_index') }}">Home</a></li>
        <li><a href="{{ path('series_index') }}">Series</a></li>
        <li class="active">{{ series.name }}</li>
    </ol>

    <div class="row">

        <div class="col-lg-12">
            <h1 class="page-header">{{ series.name }}</h1>
        </div>

        {% if series.poster %}
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 thumb">
            <a class="thumbnail" href="">
                <img class="img-responsive" src="{{ series.poster }}" alt="{{ series.name }}" >
            </a>
        </div>
        {% endif %}
    </div>

                    
        <table class="table">
            <tbody>
                <tr>
                    <td>Id</td>
                    <td>{{ series.id }}</td>
                </tr>

                <tr>
                    <td>Synopsis</td>
                    <td>{{ series.synopsis }}</td>
                </tr>

                <tr>
                    <td>Persons</td>
                    <td>{{ series.persons }}</td>
                </tr>
                <tr>
                    <td>Ratings</td>
                    <td>{{ average}}</td>
                </tr>
                <tr>
                    <td>Followed By</td>
                    <td>{% for user in series.followedBy %}
                        {{user.username}}
                    {% endfor %}
                    </td>
                </tr>
                <tr>
                    <td>Season</td>
                {% if series.seasons %}
                    {% for season in series.seasons %}

                        <td>season {{season.season}}</td>
                        {% if season.episodes %}
                            {% for epi in season.episodes %}
                                <td>Episode {{epi.episode}}</td>
                                    <td>{{epi.title}}</td>
                            {% endfor %} 
                        {% endif %}    
                    {% endfor %}
                {% endif %}  
                </tr>


                <tr>    
                    
                    <td><a href="{{ path('propose_changes', { 'id': series.id }) }}"><button>Propose Changes</button></a></td>
                    
                    <td><a href="{{ path('series_follow', { 'id': series.id }) }}"><button>Follow {{ series.name }}</button></a></td>                
                    {% if is_granted('ROLE_ADMIN') %}    
                        {% if series.validated==0 %} 
                            <td><a href="{{ path('series_validate', { 'id': series.id }) }}"><button>Validate</button></a></td>
                        {% endif %}
                    <td><a href="{{ path('series_edit', { 'id': series.id }) }}"><button>Edit</button></a></td>
                                            
                    <td>
                            {{ form_start(delete_form) }}
                            <input type="submit" value="Delete series by admin only">
                            {{ form_end(delete_form) }}
                        {% endif %}
                    </td>
                </tr>            


            </tbody>
        </table>

        <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#home">Home</a></li>
            <li><a data-toggle="tab" href="#menu1">Menu 1</a></li>
            <li><a data-toggle="tab" href="#menu2">Menu 2</a></li>
            <li><a data-toggle="tab" href="#menu3">Menu 3</a></li>
          </ul>

          <div class="tab-content">
            <div id="home" class="tab-pane fade in active">
              <h3>HOME</h3>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
            </div>
            <div id="menu1" class="tab-pane fade">
              <h3>Menu 1</h3>
              <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
            <div id="menu2" class="tab-pane fade">
              <h3>Menu 2</h3>
              <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam.</p>
            </div>
            <div id="menu3" class="tab-pane fade">
              <h3>Menu 3</h3>
              <p>Eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
            </div>
          </div>
        {{ include('seriesrating/new.html.twig') }}

        {{ include('comment/show.html.twig', { 'series.comments': series.comments }) }}

        {{ include('comment/new.html.twig', { 'form': form }) }}

        <ul>
            <li>
                <a href="{{ path('series_index') }}">Back to the series list</a>
            </li>

        </ul>
    {% endif %}
{% endblock %}
